// Generated by CoffeeScript 1.8.0
(function() {
  var __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  app.views.Document = (function(_super) {
    __extends(Document, _super);

    function Document() {
      return Document.__super__.constructor.apply(this, arguments);
    }

    Document.el = document;

    Document.shortcuts = {
      help: 'onHelp',
      escape: 'onEscape',
      superLeft: 'onBack',
      superRight: 'onForward'
    };

    Document.prototype.init = function() {
      this.addSubview(this.nav = new app.views.Nav, this.addSubview(this.sidebar = new app.views.Sidebar));
      //if (app.views.Resizer.isSupported()) {
      //  this.addSubview(this.resizer = new app.views.Resizer);
      //}
      this.addSubview(this.content = new app.views.Content);
      if (!(app.isSingleDoc() || app.isMobile())) {
        this.addSubview(this.path = new app.views.Path);
      }
      this.setTitle();
      this.activate();
    };

    Document.prototype.toggleLight = function() {
      var alt, css, _ref;
      css = $('link[rel="stylesheet"][data-alt]');
      alt = css.getAttribute('data-alt');
      css.setAttribute('data-alt', css.getAttribute('href'));
      css.setAttribute('href', alt);
      app.settings.setDark(alt.indexOf('dark') > 0);
      if ((_ref = app.appCache) != null) {
        _ref.updateInBackground();
      }
    };

    Document.prototype.setTitle = function(title) {
      return this.el.title = title ? app.config.site_title + "/" + title : app.config.site_title;
    };

    Document.prototype.onHelp = function() {
      return app.router.show('/help#shortcuts');
    };

    Document.prototype.onEscape = function() {
      var path;
      path = !app.isSingleDoc() || location.pathname === app.doc.fullPath() ? '/' : app.doc.fullPath();
      return app.router.show(path);
    };

    Document.prototype.onBack = function() {
      return history.back();
    };

    Document.prototype.onForward = function() {
      return history.forward();
    };

    return Document;

  })(app.View);

}).call(this);
